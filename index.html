<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
  <title>YoCoke</title>

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

  <!-- Firebase -->
  <script src="https://cdn.firebase.com/js/client/2.0.4/firebase.js"></script>

  <!-- css -->
	<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
	<link rel="stylesheet" href="style.css">

	<!-- fonts -->
	<link href='http://fonts.googleapis.com/css?family=Montserrat:700' rel='stylesheet' type='text/css'>

	
</head>

<body>
	<div class="vendingMachine">
		<div class="row r0">Coke</div>
		<div class="row r1">Diet Coke</div>
		<div class="row r2">Sprite</div>
		<div class="row r3">Diet Cherry 7up</div>
		<div class="row r4">Root Beer</div>
		<div class="row r5">Vanilla Coke</div>
		<div class="row r6">Random</div>
	</div>

	Yo username <input type="text" id ="yoUsername">
	Yo API KEY <input type="text" id ="yoAPIKEY">
	<button id="yoOneButton">Yo ONE</button>

	<script type="text/javascript">
		var apiURL = 'https://api.justyo.co/';
		var yoAPIKEY = "";
		var sodas = [{type:"Coke",username:"CUONGHOAN1103"},{type:"Diet Coke",username:"YOVEND81"},{type:"Sprite",username:"YOVEND82"},{type:"Diet Cherry 7up",username:"YOVEND83"},{type:"Root Beer",username:"YOVEND84"},{type:"Vanilla Coke",username:"YOVEND85"}];
///
		//create callback function to fix, initial error when API KEY has not been loaded
		$(document).click(function(){
			yoAPIKEY = $("#yoAPIKEY").val();
			console.log('document pressed: ' + yoAPIKEY)
		});
		$(".r0").click(function(){
			console.log("r0 Pressed + " + sodas[0].username);
			yoOrder(sodas[0].username);
		});
		$(".r1").click(function(){
			console.log("r0 Pressed + " + sodas[1].username);
			//yoOrder(sodas[1].username);
		});
		$(".r2").click(function(){
			console.log("r0 Pressed + " + sodas[2].username);
			//yoOrder(sodas[2].username);
		});
		$(".r3").click(function(){
			console.log("r0 Pressed + " + sodas[3].username);
			//yoOrder(sodas[3].username);
		});
		$(".r4").click(function(){
			console.log("r0 Pressed + " + sodas[4].username);
			//yoOrder(sodas[4].username);
		});
		$(".r5").click(function(){
			console.log("r0 Pressed + " + sodas[5].username);
			//yoOrder(sodas[5].username);
		});
		$(".r6").click(function(){
			console.log("r6 Pressed");
			var value = Math.floor(Math.random()*6);
			console.log(value);
			//yoOrder(sodas[value].username)
		});

		var yoOrder = function(yoCoke){
			//fix later so user must input API_KEY
		//	if(yoAPIKEY === "")
		//		yoAPIKEY = '963f906c-a42a-49c3-b106-806486bc38f9';
			$.ajax({
			  type: "POST",
			  url: "http://api.justyo.co/yo/",
			  data: {'api_token': yoAPIKEY, 'username': yoCoke}
			})
			.done(function succesCallback (argument) {
				console.log('success');
			})
			.fail(function failureCallback (argument) {
				console.log('failureCallback');
			});
		};
/////
/*		$("#yoOneButton").click(function(){
	    //pass the username typed in input field
	    yoOne($("#yoUsername").val(), $("#yoAPIKEY").val());
		});

		var yoOne = function(yoUsername, yoAPIKEY){
			if(yoAPIKEY === "")
				yoAPIKEY = '963f906c-a42a-49c3-b106-806486bc38f9';
			///////
	  	var myFirebaseRef = new Firebase("https://glowing-fire-3873.firebaseio.com/");
  	
			myFirebaseRef.set({
			  title: "Hello World!",
			  author: "Firebase",
			  location: {
			    city: "San Francisco",
			    state: "California",
			    zip: 94103
			  }
			});
			/////////
			$.ajax({
			  type: "POST",
			  url: "http://api.justyo.co/yo/",
			  data: {'api_token': yoAPIKEY, 'username': yoUsername}
			})
			.done(function succesCallback (argument) {
				console.log('success');
			})
			.fail(function failureCallback (argument) {
				console.log('failureCallback');
			});
		}*/
	</script>
</body>
</html>